<%- include('../../layouts/header') %>

<form action="/admin/user/update?_id=<%= user._id %>" method="post" id="update-user-form">
    <div class="form-group">
        <label for="_id">用户ID</label>
        <input type="text" id="_id" name="_id" value="<%= user._id%>" class="form-control" placeholder="用户ID">
    </div>
    <div class="form-group">
        <label for="name">用户名</label>
        <input type="text" id="name" name="name" value="<%= user.name%>" class="form-control" placeholder="用户名">
    </div>
    <div class="form-group">
        <label for="passwd">密码</label>
        <input type="password" id="passwd" name="passwd" value="<%= user.passwd%>" class="form-control" placeholder="密码">
    </div>
    <div class="form-group">
        <label for="email">邮箱</label>
        <input type="email" id="email" name="email" value="<%= user.email%>" class="form-control" placeholder="邮箱">
    </div>
    <button type="submit" class="btn btn-default" id="update-user-btn">提交</button>
</form>
<div><a href="/admin/user/list">用户列表</a></div>
<script>

    $(document).ready(function () {
        $('button#update-user-btn').on('click',function (event) {
            event.preventDefault();
            $.ajax({
                method:'post',
                url:'/admin/user/update',
                data:$('form#update-user-form').serialize(),
                success:function (data) {
                    if (data.code === 0) {
                        location.reload();
                    } else {
                        alert(data.message);
                    }
                }
            });
        });
    });
</script>
<%- include('../../layouts/footer') %>